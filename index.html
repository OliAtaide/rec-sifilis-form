<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>

<style>
    body {
        background-color: #eee;
    }

    label {
        font-weight: bold;
    }

    input,
    textarea {
        border-color: black !important;
    }

    .row {
        padding: 1em;
    }
</style>

<body>
    <header>
        <img class="img-fluid" src="imgs/header.png" alt="">
    </header>
    <main>
        <div class="card m-4">
            <div class="card-body">
                <form onsubmit="exportar()">
                    <div class="row">
                        <div class="col col-8">
                            <label class="form-label">Nome do grupo:</label>
                            <input type="text" class="form-control" placeholder="Nome do grupo">
                        </div>
                    </div>
                    <div class="row row-cols-3">
                        <div class="col">
                            <label class="form-label">(1) Nome Completo:</label>
                            <input type="text" class="form-control" placeholder="Nome Completo">
                        </div>
                        <div class="col">
                            <label class="form-label">CPF:</label>
                            <input type="number" class="form-control" placeholder="CPF" maxlength="11">
                        </div>
                        <div class="col">
                            <label class="form-label">RG:</label>
                            <input type="number" class="form-control" placeholder="RG">
                        </div>
                        <div class="col">
                            <label class="form-label">Endereço:</label>
                            <input type="text" class="form-control" placeholder="Endereço">
                        </div>
                        <div class="col">
                            <label class="form-label">Curso:</label>
                            <input type="text" class="form-control" placeholder="Curso">
                        </div>
                        <div class="col">
                            <label class="form-label">Matrícula:</label>
                            <input type="number" class="form-control" placeholder="Nome Completo">
                        </div>
                        <div class="col">
                            <label class="form-label">Instituição de Ensino:</label>
                            <input type="text" class="form-control" placeholder="Instituição de Ensino">
                        </div>
                    </div>
                    <h3 class="card-title">
                        Vídeo
                    </h3>
                    <div class="row">
                        <div class="col col-4">
                            <label class="form-label">Título:</label>
                            <input type="text" class="form-control" placeholder="Título">
                        </div>
                        <div class="col col-4">
                            <label class="form-label">Tempo:</label>
                            <input type="number" class="form-control" placeholder="Tempo">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <label class="form-label">Sinopse:</label>
                            <textarea type="text" class="form-control" placeholder="Sinopse"></textarea>
                            <button class="btn btn-secondary mt-3 w-100" type="submit">Enviar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </main>
    <table>

    </table>
</body>

<script>
    function exportar() {
        var inputs = $('input, textarea');
        console.log(inputs);
        var table = $('table');
        // table.append('<tr>');
        inputs.each(function (i) {
            table.append('<tr><th>' + $(this).attr('placeholder') + '</th><td>' + $(this).val() + '</td></tr>');
        })
        exportData();
        // table.append('</tr>');
    }

    function exportData() {
        /* Get the HTML data using Element by Id */
        var table = document.getElementById("table");

        /* Declaring array variable */
        var rows = [];

        //iterate through rows of table
        for (var i = 0, row; row = table.rows[i]; i++) {
            //rows would be accessed using the "row" variable assigned in the for loop
            //Get each cell value/column from the row
            column1 = row.cells[0].innerText;
            column2 = row.cells[1].innerText;
            column3 = row.cells[2].innerText;
            column4 = row.cells[3].innerText;
            column5 = row.cells[4].innerText;

            /* add a new records in the array */
            rows.push(
                [
                    column1,
                    column2,
                    column3,
                    column4,
                    column5
                ]
            );

        }
        csvContent = "data:text/csv;charset=utf-8,";
        /* add the column delimiter as comma(,) and each row splitted by new line character (\n) */
        rows.forEach(function (rowArray) {
            row = rowArray.join(",");
            csvContent += row + "\r\n";
        });

        /* create a hidden <a> DOM node and set its download attribute */
        var encodedUri = encodeURI(csvContent);
        var link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "Stock_Price_Report.csv");
        document.body.appendChild(link);
        /* download the data file named "Stock_Price_Report.csv" */
        link.click();
    }

    $("form").submit(function (e) {
        e.preventDefault();
    });
</script>

</html>